# Chat Application
This project contains a simple chat application with the following basic functionalities:
- Account creation giving a nickname
- Message sending to another user
- List all received messages
- List all sent messages
- List messages received from a specific user

This project is implemented using `docker-compose`. Like this the different components can be deployed as docker containers linked accordingly to expose the desired functionalities.

## How to run the application
The application can be executed by running the command `docker-compose up` at the application root directory. This command will expose the RESTful API at [`http://localhost:8080`](http://localhost:8080). In case port`8080` is not available there will be an issue running the application. This can be changed in the `.env` file if necessary.

## How to use the application
The chat API exposes the resource `users` in order to create a new user in the system. The following `curl` command shows an example of the needed request to create a new user:
``` sh
curl --request POST 'localhost:8080/users' --header 'Content-Type: application/json' --data-raw '{"nickname":"john.dove"}'
```
The second resource exposed by the API is known as `messages`. This resource is only accessible through a relationship with a specific `user`. Because of this all different kinds of messages have to be retrieved giving the _user identifier_ in the url parameters. The following `curl` requests show the possible messages to be retrieved for a specific user:

**Message sending**:
``` sh
curl --request POST 'localhost:8080/users/1/messages' --header 'USER_ID_AUTH: 1' --header 'Content-Type: application/json' --data-raw '{"to": 2, "content": "Hello"}'
```

**Retrieval of all sent messages**
``` sh
curl --request GET 'localhost:8080/users/1/sent-messages' --header 'USER_ID_AUTH: 1'
```

**Retrieval of all received messages**
``` sh
curl --request GET 'localhost:8080/users/1/received-messages' --header 'USER_ID_AUTH: 1' 
```

**Retrieval of all messages received from a specific user**
``` sh
curl --location --request GET 'localhost:8080/users/2/received-messages?from=1' --header 'USER_ID_AUTH: 2'
```

## Known possible improvements
- Alignment of `timestamp` serialisation into DB for creation and message appending
- Autogenerated API documentation (Open API)
- Validation of user existence before sending a message (not an initial requirement)
- Logging improvements
